<!DOCTYPE html>
<html lang="es">
<head>
    <%- include('./partials/head') %>
    <title>Editar producto</title>
</head>
<body>
  <%- include('./partials/header') %>
    <main>
        <div class="edicion-producto">
        </div>
        <h2 style="text-align: center;">Editar producto <em><%=productToEdit.p_name%> </em> </h2>
        <h3 style="text-align: center;">Id número <%=productToEdit.product_id%></h3>
        <div class="form-edicion">

            <form action="/productos/edit/<%=productToEdit.product_id%>?_method=PATCH" method="POST" enctype="multipart/form-data">
                <p>
                    <label for="name">Nombre del producto:</label>
                    <input type="text" id="name" name="name" class="input-text" required value= <%= productToEdit.p_name %> >
                    <% if (locals.errors && errors.name) { %>
                        <div style="color: red; text-align: center;"><%= errors.name.msg %> </div>
                    <% } %>
                </p>
                <p> Imagen principal del producto </p>
                <p><img src="/images/products/<%=productToEdit.image_p%>" style="width: 100px;"> </p>

                <p>
                    <label for="animal">Tipo de animal</label>
                    <select name="animal">
                        <option value="<%= productToEdit.animal %>">
                            <%= productToEdit.animal %>
                        </option>
                    El siguiente EJS tendrá que cambiar por database
                    <%
                        let animales = [
                        {animal: "Perros"},
                        {animal: "Gatos"},
                        {animal: "Reptiles"},
                        {animal: "Roedores"},
                        {animal: "Aves"},
                        {animal: "Peces"}
                        ];%>

                        <%animales.forEach(ani => {%>
                            <%if(ani.animal != productToEdit.animal){ %>
                                <option value="<%=ani.animal %>">
                                    <%=ani.animal%>
                                </option>
                            <%}%>
                        <%})%>
                    
                    </select>
                    
                </p> 

                 <!-- El siguiente EJS tendrá que cambiar por database-->
                <p>
                    <label for="category">Categoría</label>
                    <select name="category">
                        <option value="<%= productToEdit.category %>">
                            <%= productToEdit.category %>
                        </option>
                    <%let categorias = [
                        {category: "Alimento"},
                        {category: "Correas y Collares"},
                        {category: "Vivienda"}
                        ];%>

                        <%categorias.forEach(cate => {%>
                            <%if(cate.category != productToEdit.category){ %>
                                <option value="<%=cate.category %>">
                                    <%=cate.category%>
                                </option>
                            <%}%>
                        <%})%>

                    </select>
                </p>

                <p>
                    <label for="description">Descripción:</label>
                    <textarea id="description" name="description" class="input-area">
                        <%= productToEdit.p_description %>
                    </textarea>
                    <% if (locals.errors && errors.description) { %>
                        <div style="color: red; text-align: center;"><%= errors.description.msg %> </div>
                    <% } %>
                </p>

                <p>
                    <label for="caracteristic">Características:</label>
                    <textarea id="caracteristic" name="caracteristic" class="input-area">
                        <%= productToEdit.caracteristic %>
                    </textarea>
                </p>

                <p>
                    <label for="specs">Especificaciones:</label>
                    <textarea id="specs" name="specs" class="input-area">
                        <%= productToEdit.specs %>
                    </textarea>
                </p>

                <p>
                    <label for="price">Precio:</label>
                    <input type="number" id="price" name="price" class="input-text"
                        value="<%= productToEdit.price %>">
                </p>

                
                <div class="errorsFront" style="color: red; text-align: center;">
                    <ul></ul>
                </div>

                <div>
                    <div class="botones-edicion">
                        <button type="submit">Enviar</button>
                        <button type="reset">Cancelar</button>
                    </div>
            </form>
                    <form action="/productos/<%=productToEdit.product_id%>?_method=DELETE" method="POST" class="botones-edicion" style="display: inline-block; text-align: center;" >
                        <button type="submit">Eliminar</button>
                    </form>
                </div>

        </div>
    </main>
    <%- include('./partials/footer') %>
</body>
